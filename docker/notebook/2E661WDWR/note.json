{
  "paragraphs": [
    {
      "text": "import java.io.File\n\ndef listBuckets(): List[String] = {\n  import scala.collection.JavaConverters._\n  import com.amazonaws.services.s3.AmazonS3Client\n  \n  val s3 = AmazonS3Client.builder().withRegion(\"us-east-1\").build()\n  val buckets = s3.listBuckets.asScala\n  \n  buckets.map(_.getName).toList\n}\n\ndef showImage(file: File) = {\n  import java.io._\n  import java.util._\n  val fis = new FileInputStream(file)\n \n  val data = Array.fill[Byte](file.length.toInt)(0)\n  fis.read(data)\n  fis.close\n \n  val encoded_string = Base64.getEncoder.encodeToString(data)\n  val filename = file.getName\n  print(s\"<img title='$filename' src='data:image/jpeg;base64,$encoded_string' style='float:left;padding:5px;height:224px;width:224px' />\")\n}\n\ndef showFilesFromS3(bucketName: String, count: Int) {\n  import com.amazonaws.services.s3.model._\n  import java.io._\n  import java.util._\n  import scala.collection.JavaConverters._\n  import com.amazonaws.services.s3.transfer._\n  import com.amazonaws.services.s3.AmazonS3Client\n\n  val s3 = AmazonS3Client.builder().withRegion(\"us-east-1\").build()\n  val buckets = s3.listBuckets.asScala\n\n  buckets.filter(\n    _.getName == bucketName    \n  ).map(\n    (b) => { \n      val objects = s3.listObjects(b.getName)\n      objects.getObjectSummaries.asScala.map(\n        (f) => f.getKey\n      ).filter(\n        (f) => f.startsWith(\"validation\") && f.endsWith(\".jpg\")     \n      ).take(count).map(\n        (f) => {\n          val out = new File(\"/tmp/\" + f)\n          TransferManagerBuilder\n            .standard\n            .withS3Client(s3)\n            .build()\n            .download(b.getName, f, out)\n                  \n          out\n      }\n    ).map(\n      showImage\n    )\n  })\n}",
      "user": "anonymous",
      "dateUpdated": "2019-02-14 16:10:35.152",
      "config": {
        "colWidth": 12,
        "fontSize": 9,
        "enabled": true,
        "results": {},
        "editorSetting": {
          "language": "scala",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {},
      "apps": [],
      "jobName": "paragraph_1550006400682_-724854133",
      "id": "20190212-212000_1513042490",
      "dateCreated": "2019-02-12 21:20:00.682",
      "dateStarted": "2019-02-14 16:10:35.279",
      "dateFinished": "2019-02-14 16:10:35.464",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "println(\"%html\")\nval selection = z.select(\"\", listBuckets.map((b) => (b, b)).sorted)\nval count = z.select(\"6\", List(\"6\", \"12\", \"24\", \"48\", \"96\").map((c) => (c, c)))\n\nif (selection != \"\") {\n  println(s\"<h5>$selection</h5>\")\n  showFilesFromS3(selection + \"\", (count + \"\").toInt)\n}",
      "user": "anonymous",
      "dateUpdated": "2019-02-14 16:12:36.279",
      "config": {
        "colWidth": 6,
        "fontSize": 9,
        "enabled": true,
        "results": {},
        "editorSetting": {
          "language": "scala",
          "editOnDblClick": false,
          "completionKey": "TAB",
          "completionSupport": true
        },
        "editorMode": "ace/mode/scala",
        "runOnSelectionChange": true
      },
      "settings": {
        "params": {
          "6": "24",
          "": "objectdetection-alerts-small-both-2019-02-11-21-38"
        },
        "forms": {}
      },
      "results": {},
      "apps": [],
      "jobName": "paragraph_1550090515820_12988636",
      "id": "20190213-204155_639914255",
      "dateCreated": "2019-02-13 20:41:55.823",
      "dateStarted": "2019-02-14 16:12:36.282",
      "dateFinished": "2019-02-14 16:12:37.699",
      "status": "ERROR",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "%md Pick a bucket: ${bucket=objectdetection-alerts-small-both-2019-02-11-21-38|objectdetection-household-household2-2019-02-09-09-44|objectdetection-household-household2-2019-02-09-09-49|objectdetection-household-household2-2019-02-09-12-59|objectdetection-household-household2-2019-02-09-13-53|objectdetection-household-household2-2019-02-09-22-27|objectdetection-kiddetector-small-2019-02-09-22-28|objectdetection-kiddetector-small-2019-02-10-09-04|objectdetection-kiddetector-small-2019-02-10-09-55|objectdetection-kiddetector-small-2019-02-10-10-38|objectdetection-kiddetector-small-2019-02-10-10-49|objectdetection-kiddetector-small-2019-02-10-11-11|objectdetection-kiddetector-small-both-2019-02-10-16-15|objectdetection-kiddetector-small-both-2019-02-11-21-28|sieling.household}",
      "user": "anonymous",
      "dateUpdated": "2019-02-13 20:47:35.414",
      "config": {
        "colWidth": 12,
        "fontSize": 9,
        "enabled": true,
        "results": {},
        "editorSetting": {
          "language": "markdown",
          "editOnDblClick": true,
          "completionKey": "TAB",
          "completionSupport": false
        },
        "editorMode": "ace/mode/markdown",
        "editorHide": true,
        "tableHide": false
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {},
      "apps": [],
      "jobName": "paragraph_1550090802489_-600827844",
      "id": "20190213-204642_1308285141",
      "dateCreated": "2019-02-13 20:46:42.489",
      "status": "ABORT",
      "progressUpdateIntervalMs": 500
    },
    {
      "user": "anonymous",
      "config": {
        "results": {}
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {},
      "apps": [],
      "jobName": "paragraph_1550089681233_-2061117436",
      "id": "20190213-202801_270180391",
      "dateCreated": "2019-02-13 20:28:01.233",
      "status": "READY",
      "progressUpdateIntervalMs": 500
    }
  ],
  "name": "Model Quality",
  "id": "2E661WDWR",
  "noteParams": {},
  "noteForms": {},
  "angularObjects": {
    "md:shared_process": [],
    "spark:shared_process": []
  },
  "config": {
    "isZeppelinNotebookCronEnable": false
  },
  "info": {}
}